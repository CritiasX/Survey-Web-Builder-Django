{% load static %}
<nav class="navbar navbar-expand-md bg-body py-3" style="box-shadow: 0 1px 4px rgba(0,0,0,0.1); margin: 0; width: 100%; position: relative; font-family: 'Lato', sans-serif;">
    <style>
        /* Header layout tweaks: left / center / right columns */
        .header-grid { grid-template-columns: auto 1fr auto; align-items: center; gap: 1rem; }
        .header-left { justify-self: start; }
        .header-center { justify-self: center; }
        .header-right { justify-self: end; }

        /* Center the nav items horizontally */
        .header-center .navbar-nav { display: flex; gap: 1rem; justify-content: center; align-items: center; }

        /* Make toggler sit above other elements on small screens */
        .navbar-toggler { z-index: 1100; }

        /* Slight spacing refinements */
        .navbar-brand { margin-right: .5rem; }
        .header-center .nav-link { padding-left: .5rem; padding-right: .5rem; }

        /* Ensure action button doesn't wrap under nav on smaller md widths */
        @media (max-width: 991px) {
            .header-grid { grid-template-columns: auto 1fr; }
            .header-right { display: none !important; }
        }
    </style>

    <div class="container-fluid px-4 d-grid align-items-center header-grid" style="grid-template-columns: auto 1fr auto;">
        <!-- Left: Logo (and mobile toggler) -->
        <div class="header-left d-flex align-items-center">
            <a class="navbar-brand d-flex align-items-center me-2" href="{% url 'landing' %}" style="font-family: 'Lato', sans-serif;">
                <span class="bs-icon-sm bs-icon-rounded bs-icon-primary d-flex justify-content-center align-items-center me-2 bs-icon">
                    <!-- ...existing logo svg... -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-bezier">
                        <path fill-rule="evenodd" d="M0 10.5A1.5 1.5 0 0 1 1.5 9h1A1.5 1.5 0 0 1 4 10.5v1A1.5 1.5 0 0 1 2.5 13h-1A1.5 1.5 0 0 1 0 11.5zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm10.5.5A1.5 1.5 0 0 1 13.5 9h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1a1.5 1.5 0 0 1-1.5-1.5zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM6 4.5A1.5 1.5 0 0 1 7.5 3h1A1.5 1.5 0 0 1 10 4.5v1A1.5 1.5 0 0 1 8.5 7h-1A1.5 1.5 0 0 1 6 5.5zM7.5 4a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"></path>
                        <path d="M6 4.5H1.866a1 1 0 1 0 0 1h2.668A6.517 6.517 0 0 0 1.814 9H2.5c.123 0 .244.015.358.043a5.517 5.517 0 0 1 3.185-3.185A1.503 1.503 0 0 1 6 5.5zm3.957 1.358A1.5 1.5 0 0 0 10 5.5v-1h4.134a1 1 0 1 1 0 1h-2.668a6.517 6.517 0 0 1 2.72 3.5H13.5c-.123 0-.243.015-.358.043a5.517 5.517 0 0 0-3.185-3.185z"></path>
                    </svg>
                </span>
                <span>ResponsePro</span>
            </a>

            <!-- Mobile toggler (keeps collapse behavior) -->
            <button class="navbar-toggler ms-1 d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#navcol-3" aria-controls="navcol-3" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>

        <!-- Center: Navigation -->
        <div class="header-center collapse navbar-collapse justify-content-center" id="navcol-3" style="justify-self: center;">
            <ul class="navbar-nav">
                <li class="nav-item px-2"><a class="nav-link text-uppercase fw-bold" href="{% url 'landing' %}" style="font-family: 'Lato', sans-serif;">Home</a></li>
                <li class="nav-item px-2"><a class="nav-link text-uppercase fw-bold" href="{% url 'about' %}" style="font-family: 'Lato', sans-serif;">About</a></li>
                <li class="nav-item px-2"><a class="nav-link text-uppercase fw-bold" href="{% url 'contact' %}" style="font-family: 'Lato', sans-serif;">Features</a></li>
            </ul>

            <!-- Mobile-only action button inside collapsed nav to avoid overlap -->
            <div class="d-md-none mt-2">
                {% if user.is_authenticated %}
                    <a href="{% url 'dashboard' %}" class="btn btn-success text-uppercase w-100 ripple" style="font-family: 'Lato', sans-serif;">Dashboard</a>
                {% else %}
                    {% if request.path == '/login/' %}
                        <a href="{% url 'register' %}" class="btn btn-primary text-uppercase w-100 ripple" id="auth-btn-mobile" style="font-family: 'Lato', sans-serif;">Register</a>
                    {% elif request.path == '/register/' %}
                        <a href="{% url 'login' %}" class="btn btn-primary text-uppercase w-100 ripple" id="auth-btn-mobile" style="font-family: 'Lato', sans-serif;">Login</a>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-primary text-uppercase w-100 ripple" id="auth-btn-mobile" style="font-family: 'Lato', sans-serif;">Login</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>

        <!-- Right: Action button (desktop) -->
        <div class="header-right d-none d-md-flex align-items-center gap-2" style="justify-self: end;">
            {% if user.is_authenticated %}
                <a href="{% url 'dashboard' %}" class="btn btn-success text-uppercase px-4 ripple" style="font-family: 'Lato', sans-serif;">Dashboard</a>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-primary text-uppercase px-4 ripple" style="font-family: 'Lato', sans-serif;">Login</a>
                <a href="{% url 'register' %}" class="btn btn-outline-primary text-uppercase px-4 ripple" style="font-family: 'Lato', sans-serif;">Register</a>
            {% endif %}
        </div>
    </div>
</nav>
